sudo apt install -y yasm \
                         cmake \
                         cmake-curses-gui \
                         libvorbis-dev \
                         libx264-dev \
                         libx265-dev \
                         libnuma-dev \
                         libvpx-dev \
                         libass-dev \
                         libfdk-aac-dev \
                         libmp3lame-dev \
                         libopus-dev \
                         libtheora-dev

cd /tmp
git clone https://github.com/videolan/x265
cd x265/build/linux
./make-Makefiles.bash
make
sudo make install

mkdir /tmp/ffmpeg_sources
cd /tmp/ffmpeg_sources
wget http://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2
tar xjvf ffmpeg-snapshot.tar.bz2
cd ffmpeg

PKG_CONFIG_PATH="/usr/bin/pkg-config" ./configure \
  --prefix="$HOME/ffmpeg_build" \
  --pkg-config-flags="--static" \
  --extra-cflags="-I$HOME/ffmpeg_build/include" \
  --extra-ldflags="-L$HOME/ffmpeg_build/lib -L/usr/local/lib" \
  --bindir="/usr/local/bin" \
  --enable-static \
  --enable-gpl \
  --enable-libass \
  --enable-libfdk-aac \
  --enable-libfreetype \
  --enable-libmp3lame \
  --enable-libopus \
  --enable-libtheora \
  --enable-libvorbis \
  --enable-libvpx \
  --enable-libx264 \
  --enable-libx265 \
  --enable-nonfree
make
sudo make install

sudo rm -rf /tmp/x265 /tmp/ffmpeg_sources $HOME/ffmpeg_build
